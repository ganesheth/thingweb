{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Thing Description",
  "description": "Description of a Web Thing, such as sensors, actuators or more complex computer devices with Internet connectivity",
  "type": "object",
  "properties": {
    "uris": {
      "$ref": "#/definitions/hrefs"
    },
    "name": {
      "$ref": "#/definitions/name"
    },
    "encodings": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["JSON", "EXI", "XML"]
      },
      "uniqueItems": true
    },
    "security": {
      "type": "object",
      "title": "Security metadata"
    },
    "properties": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/property"
      }
    },
    "actions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/action"
      }
    },
    "events": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/event"
      }
    },
    "associations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/associatedThing"
      }
    }
  },
  "required": ["name"],
  "definitions": {
    "name": {
      "type": "string"
    },
    "hrefs": {
      "description": "List of possible URIs to access the resource (e.g. with different schemes)",
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "data": {
      "title": "Data type",
      "anyOf": [{
          "description": "URI of an XSD built-in type",
          "type": "string"
        }, {
          "description": "URI of an XSD built-in type with restrictions",
          "type": "object",
          "properties": {
            "valueType": {
              "type": "string"
            },
            "min": {
              "type": "string"
            },
            "max": {
              "type": "string"
            }
          },
          "required": ["valueType"]
        }
      ]
    },
    "property": {
      "title": "Property",
      "description": "Thing's property, such as measurable quantity (temperature, brightness...), actionable variable (switch, potentiometer...) or configuration parameter (acquisition frequency, threshold...)",
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/name"
        },
        "hrefs": {
          "$ref": "#/definitions/hrefs"
        },
        "valueType": {
          "$ref": "#/definitions/data"
        },
        "writable": {
          "type": "boolean"
        }
      },
      "required": ["name", "valueType"]
    },
    "action": {
      "title": "Action",
      "description": "Action a Thing could perform that includes delay (increase value, process data...) and/or introduces changes in its environment (move object...)",
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/name"
        },
        "hrefs": {
          "$ref": "#/definitions/hrefs"
        },
        "outputData": {
          "$ref": "#/definitions/data"
        },
        "inputData": {
          "$ref": "#/definitions/data"
        }
      },
      "required": ["name"]
    },
    "event": {
      "title": "Event",
      "description": "Event generated by a Thing that one could subscribe to (temperature above threshold, low battery...)",
      "type": "object",
      "properties": {
        "name": {
          "$ref": "#/definitions/name"
        },
        "hrefs": {
          "$ref": "#/definitions/hrefs"
        },
        "valueType": {
          "$ref": "#/definitions/data"
        },
        "property": {
          "anyOf": [{
              "description": "ID of one of the Thing's properties (see JSON-LD's keyword \"@id\")",
              "type": "string"
            }, {
              "$ref": "#/definitions/property"
            }
          ]
        }
      },
      "required": ["name", "valueType"]
    },
    "associatedThing": {
      "title": "Associated Thing",
      "description": "Associated thing (e.g. through parent, composition or dependency relations)",
      "type": "object",
      "properties": {
        "hrefs": {
          "$ref": "#/definitions/hrefs"
        }
      },
      "required": ["hrefs"]
    }
  }
}
